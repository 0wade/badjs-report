var BJ_REPORT=function(a){if(a.BJ_REPORT)return a.BJ_REPORT;var b=[];a.onerror=function(a,c,d,e,f){b.push({msg:a,target:c,rowNum:d,colNum:e,error:f}),j()};var c,d={id:0,uin:0,url:"",combo:1,level:4,ignore:[],delay:100,submit:null},e=function(a,b){return Object.prototype.toString.call(a)==="[object "+(b||"Object")+"]"},f=function(a,b){var c=[],f=[],g=[];if(e(a)){a.level=a.level||d.level;for(var h in a){var i=a[h]||"";i&&("object"==typeof i&&(i=JSON.stringify(i)),g.push(h+":"+i),c.push(h+"="+encodeURIComponent(i)),f.push(h+"["+b+"]="+encodeURIComponent(i)))}}return[f.join("&"),g.join(","),c.join("&")]},g=function(a){if(d.submit)d.submit(a);else{var b=new Image;b.src=a}},h=[],i=!1,j=function(){if(d.report){for(;b.length;){for(var a=!1,j=b.shift(),k=f(j,h.length),l=0,m=d.ignore;m>l;l++){var n=d.ignore[l];if(e(n,"RegExp")&&n.test(k[1])||e(n,"Function")&&n(j,k[1])){a=!0;break}}a||(d.combo?h.push(k[0]):g(d.report+k[2]+"&_t="+ +new Date))}if(d.combo){if(i)return;i=!0,c=setTimeout(function(){var a=h.length;g(d.report+h.join("&")+"&count"+a+"&_t="+ +new Date),h=[],i=!1},d.delay)}}},k=!1,l={push:function(a){return b.push(e(a)?a:{msg:a}),l},report:function(a){return a&&l.push(a),j(),l},init:function(a){if(e(a))for(var f in a)d[f]=a[f];var g=parseInt(d.id,10);return g&&(d.report=(d.url||"http://badjs2.qq.com/badjs")+"?id="+g+"&uin="+parseInt(d.uin||(document.cookie.match(/uin=\D+(\d+)/)||[])[1],10)+"&from="+encodeURIComponent(location.href)+"&",k=!0),b=[],h=[],clearTimeout(c),l}};return l}(window);!function(a){if(a.BJ_REPORT){try{throw new Error("testError")}catch(b){if(!b.stack)return}var c=function(b){try{if(b.stack){var c=b.stack.match("http://[^\n]+")[0],d=c.match(":([0-9]+):([0-9]+)"),e=b.stack.replace(/\n/gi,"@").replace(/at[\s]/gi,"");a.BJ_REPORT.report({msg:e,rowNum:d[1],colNum:d[2],target:c.replace(d[0],"")})}else a.BJ_REPORT.report(b)}catch(f){a.BJ_REPORT.report(f)}},d=a.BJ_REPORT.tryJs=function(a){return a&&(c=a),d},e=function(a,b){var c;for(c in b)a[c]=b[c]},f=function(a){return"function"==typeof a},g=function(a,b){return function(){try{return a.apply(this,b||arguments)}catch(d){c(d)}}},h=function(a){return function(){for(var b,c=[],d=0,e=arguments.length;e>d;d++)b=arguments[d],f(b)&&(b=g(b)),c.push(b);return a.apply(this,c)}},i=function(a){return function(b,c){if("string"==typeof b)try{b=new Function(b)}catch(d){throw d}var e=[].slice.call(arguments,2);return b=g(b,e.length&&e),a(b,c)}},j=function(a,b){return function(){for(var c,d,e=[],h=0,i=arguments.length;i>h;h++)c=arguments[h],f(c)&&(d=g(c))&&(c.tryWrap=d)&&(c=d),e.push(c);return a.apply(b||this,e)}},k=function(a){var b,c;for(b in a)c=a[b],f(c)&&(a[b]=g(c));return a};d.spyJquery=function(){var b=a.$;if(!b||!b.event)return d;var c=b.event.add,e=b.ajax,g=b.event.remove;return c&&(b.event.add=j(c),b.event.remove=function(){for(var a,b=[],c=0,d=arguments.length;d>c;c++)a=arguments[c],f(a)&&(a=a.tryWrap),b.push(a);return g.apply(this,b)}),e&&(b.ajax=function(a,c){return c||(c=a,a=void 0),k(c),a?e.call(b,a,c):e.call(b,c)}),d},d.spyModules=function(){var b=a.require,c=a.define;return b&&c&&(a.require=h(b),e(a.require,b),a.define=h(c),e(a.define,c)),d},d.spySystem=function(){return a.setTimeout=i(a.setTimeout),a.setInterval=i(a.setInterval),d},d.spyCustom=function(a){return f(a)?g(a):k(a)},d.spyAll=function(){return d.spyJquery().spyModules().spySystem(),d}}}(window);